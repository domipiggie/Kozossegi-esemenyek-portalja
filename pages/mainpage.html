<!DOCTYPE html>
<html lang="hu">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="../css/mainpage.css">
    <title>Közösségi Események Portálja</title>
</head>

<body>
    <div class="container">
        <nav class="navbar navbar-light bg-light justify-content-between">
            <a id="esemeny" class="navbar-brand" href="/esemenyadd.html">Esemény hozzáadása</a>
            <form class="form-inline">
              <input id="searchIn" class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search">
              <input type="button" id="searchBtn" class="btn btn-outline-success my-2 my-sm-0" value="Search">
            </form>
          </nav>
    </div>
    <div class="mt-5 text-center">
        <h1>Jelenlegi Események</h1>
    </div>
    <div id="post" class="mt-5 text-center">

    </div>
    <script src="https://www.gstatic.com/firebasejs/9.8.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.8.1/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-auth-compat.js"></script>
    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyCNWYxskOcWrPruI5fmx8BM51V4zgcJVYU",
            authDomain: "kozossegi-esemeny-portal.firebaseapp.com",
            projectId: "kozossegi-esemeny-portal",
            storageBucket: "kozossegi-esemeny-portal.appspot.com",
            messagingSenderId: "987444679907",
            appId: "1:987444679907:web:d8f55e9b459ab722a7a1d6"
        };

        const searchIn = document.getElementById("searchIn")
        const searchBtn = document.getElementById("searchBtn")

        const app = firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore(app);
        const auth = firebase.auth(app);

        auth.onAuthStateChanged(user => {
            if (!user) {
                //window.location = '../index.html';
            }
        })

        searchBtn.addEventListener('click', function(e){
            e.preventDefault()
            db.collection("Esemenyek").onSnapshot((quarySnapshots) => {
                quarySnapshots.forEach((doc)=>{
                    if (doc.data().nev.startsWith(searchIn.value)){
                        console.log(doc.id)
                        console.log(doc.data())
                    }
                })
            })
        })

        db.collection("Esemenyek").onSnapshot((quarySnapshots) => {
            quarySnapshots.forEach((doc)=>{
                console.log(doc.id)
                console.log(doc.data())
            })
        })
    </script>
</body>

</html>